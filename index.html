<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ å¯†è´§å¸äº¤æ˜“åŠ©æ‰‹ - èˆ†æƒ…ç³»ç»Ÿ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0d0d1a 0%, #1a1a2e 100%); min-height: 100vh; padding: 20px; color: #fff; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 30px; font-size: 2rem; }
        
        .tabs { display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; justify-content: center; }
        .tab-btn { padding: 12px 20px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 25px; color: rgba(255,255,255,0.8); cursor: pointer; transition: all 0.3s; }
        .tab-btn:hover, .tab-btn.active { background: linear-gradient(135deg, #667eea, #764ba2); border-color: transparent; color: #fff; }
        .tab-content { display: none; animation: fadeIn 0.5s; }
        .tab-content.active { display: block; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background: rgba(255,255,255,0.08); backdrop-filter: blur(10px); border-radius: 20px; padding: 25px; border: 1px solid rgba(255,255,255,0.15); }
        .card:hover { transform: translateY(-3px); }
        
        .fear-gauge { text-align: center; padding: 20px; }
        .fear-value { font-size: 4rem; font-weight: bold; }
        .fear-value.high { color: #00c853; }
        .fear-value.medium { color: #ffab00; }
        .fear-value.low { color: #ff1744; }
        .fear-label { font-size: 1.5rem; margin: 10px 0; }
        .fear-desc { color: rgba(255,255,255,0.6); }
        
        .metric-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .metric-row:last-child { border-bottom: none; }
        .metric-label { color: rgba(255,255,255,0.7); }
        .metric-value { font-weight: bold; }
        .metric-value.up { color: #00c853; }
        .metric-value.down { color: #ff1744; }
        
        .section-title { font-size: 1.3rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        
        .twitter-sentiment { display: grid; gap: 15px; }
        .sentiment-item { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; border-left: 4px solid; }
        .sentiment-item.positive { border-color: #00c853; }
        .sentiment-item.negative { border-color: #ff1744; }
        .sentiment-item.neutral { border-color: #ffab00; }
        .sentiment-score { font-size: 2rem; font-weight: bold; }
        .sentiment-keyword { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .keyword { padding: 4px 12px; background: rgba(102,126,234,0.3); border-radius: 15px; font-size: 0.85rem; }
        
        .whale-item { display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 12px; margin-bottom: 10px; }
        .whale-direction { padding: 8px 15px; border-radius: 20px; font-weight: bold; }
        .whale-direction.accumulate { background: rgba(0,200,83,0.3); color: #00c853; }
        .whale-direction.distribute { background: rgba(255,23,68,0.3); color: #ff1744; }
        
        .exchange-flow { display: flex; align-items: center; gap: 20px; }
        .flow-arrow { font-size: 2rem; }
        .flow-amount { font-size: 1.5rem; font-weight: bold; }
        
        .loading { text-align: center; color: rgba(255,255,255,0.6); padding: 30px; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’° åŠ å¯†è´§å¸äº¤æ˜“åŠ©æ‰‹ - èˆ†æƒ…ç³»ç»Ÿ</h1>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('dashboard')">ğŸ“Š ä»ªè¡¨ç›˜</button>
            <button class="tab-btn" onclick="showTab('sentiment')">ğŸ˜° èˆ†æƒ…</button>
            <button class="tab-btn" onclick="showTab('onchain')">â›“ï¸ é“¾ä¸Šæ•°æ®</button>
            <button class="tab-btn" onclick="showTab('whales')">ğŸ‹ å·¨é²¸</button>
            <button class="tab-btn" onclick="showTab('twitter')">ğŸ¦ Twitter</button>
            <button class="tab-btn" onclick="showTab('news')">ğŸ“° æ–°é—»</button>
            <button class="tab-btn" onclick="showTab('positions')">ğŸ’¼ æŒä»“</button>
        </div>
        
        <!-- ä»ªè¡¨ç›˜ -->
        <div id="dashboard" class="tab-content active">
            <div class="grid">
                <div class="card">
                    <h3 class="section-title">ğŸ“Š ææƒ§è´ªå©ªæŒ‡æ•°</h3>
                    <div class="fear-gauge">
                        <div class="fear-value" id="fear-value">---</div>
                        <div class="fear-label" id="fear-label">åŠ è½½ä¸­...</div>
                        <div class="fear-desc" id="fear-desc">å¸‚åœºæƒ…ç»ªæŒ‡æ ‡</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ¯ AHR999 ä¼°å€¼</h3>
                    <div style="text-align: center; padding: 15px 0;">
                        <div id="ahr999-value" style="font-size: 3.5rem; font-weight: bold; color: #667eea;">---</div>
                        <div id="ahr999-zone" style="padding: 10px 25px; border-radius: 25px; display: inline-block; margin: 10px 0; font-weight: bold;">åŠ è½½ä¸­...</div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: rgba(255,255,255,0.4); margin-top: 15px; padding: 0 10px;">
                            <span>0.45 ä¹°å…¥</span><span>1.2 æŒæœ‰</span><span>2.0 å–å‡º</span>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ’¹ äº¤æ˜“æ‰€èµ„é‡‘æµå‘</h3>
                    <div id="exchange-flow">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ“ˆ BTC é“¾ä¸ŠæŒ‡æ ‡</h3>
                    <div id="btc-metrics">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ‹ å·¨é²¸åŠ¨å‘</h3>
                    <div id="whale-summary">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- èˆ†æƒ…åˆ†æ -->
        <div id="sentiment" class="tab-content">
            <div class="grid">
                <div class="card">
                    <h3 class="section-title">ğŸ˜° ææƒ§è´ªå©ªæŒ‡æ•°</h3>
                    <div class="fear-gauge">
                        <div class="fear-value" id="fear-value2">---</div>
                        <div class="fear-label" id="fear-label2">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ’¬ ç¤¾äº¤åª’ä½“æƒ…ç»ª</h3>
                    <div id="social-sentiment">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ”¥ çƒ­é—¨å…³é”®è¯</h3>
                    <div class="sentiment-keyword" id="hot-keywords">
                        <span class="keyword">åŠ è½½ä¸­...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é“¾ä¸Šæ•°æ® -->
        <div id="onchain" class="tab-content">
            <div class="grid">
                <div class="card">
                    <h3 class="section-title">ğŸ“Š BTC æ´»è·ƒåœ°å€</h3>
                    <div id="active-addresses">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ’° äº¤æ˜“æ‰€å‚¨å¤‡</h3>
                    <div id="exchange-reserves">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ“‰ äº¤æ˜“æ‰€æµå…¥/æµå‡º</h3>
                    <div id="exchange-flow-detail">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ’ å·¨é²¸åœ°å€æ•°</h3>
                    <div id="whale-count">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å·¨é²¸è¿½è¸ª -->
        <div id="whales" class="tab-content">
            <div class="grid">
                <div class="card">
                    <h3 class="section-title">ğŸ‹ å¤§æˆ·æŒä»“å˜åŒ–</h3>
                    <div id="whale-holdings">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ“Š å·¨é²¸äº¤æ˜“ç»Ÿè®¡</h3>
                    <div id="whale-stats">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ–°é—» -->
        <div id="news" class="tab-content">
            <div class="grid">
                <div class="card">
                    <h3 class="section-title">ğŸ“° æœ€æ–°æ–°é—»</h3>
                    <div id="crypto-news">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="section-title">ğŸ”¥ çƒ­é—¨è¯é¢˜</h3>
                    <div id="trending-topics">
                        <div class="loading">åŠ è½½ä¸­...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Twitter -->
        <div id="twitter" class="tab-content">
            <div class="card">
                <h3 class="section-title">ğŸ¦ Twitter èˆ†æƒ…ç›‘æ§</h3>
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <input type="text" id="twitter-user" placeholder="è¾“å…¥ç”¨æˆ·å (å¦‚: elonmusk)" style="flex: 1; padding: 12px 20px; border: 1px solid rgba(255,255,255,0.2); border-radius: 25px; background: rgba(255,255,255,0.1); color: #fff;">
                    <button onclick="searchTwitter()" style="padding: 12px 25px; background: linear-gradient(135deg, #1da1f2, #0d8ecf); border: none; border-radius: 25px; color: white; cursor: pointer;">ğŸ”</button>
                </div>
                <div class="preset-btns" style="margin-bottom: 20px;">
                    <button onclick="searchPreset('elonmusk')" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; color: rgba(255,255,255,0.8); cursor: pointer;">Elon Musk</button>
                    <button onclick="searchPreset('VitalikButerin')" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; color: rgba(255,255,255,0.8); cursor: pointer;">Vitalik</button>
                    <button onclick="searchPreset('cz_binance')" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; color: rgba(255,255,255,0.8); cursor: pointer;">CZ</button>
                    <button onclick="searchPreset('CryptoCarl')" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; color: rgba(255,255,255,0.8); cursor: pointer;">CryptoCarl</button>
                </div>
                <div id="twitter-results">
                    <div class="loading">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹æ¨æ–‡</div>
                </div>
            </div>
        </div>
        
        <!-- æŒä»“ -->
        <div id="positions" class="tab-content">
            <div class="card">
                <h3 class="section-title">ğŸ’¼ æŒä»“ç®¡ç†</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <input type="text" id="pos-coin" placeholder="å¸ç§" style="padding: 12px; border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; background: rgba(255,255,255,0.1); color: #fff;">
                    <input type="number" id="pos-amount" placeholder="æ•°é‡" style="padding: 12px; border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; background: rgba(255,255,255,0.1); color: #fff;">
                    <input type="number" id="pos-entry" placeholder="ä¹°å…¥ä»·" style="padding: 12px; border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; background: rgba(255,255,255,0.1); color: #fff;">
                    <button onclick="addPosition()" style="padding: 12px 25px; background: linear-gradient(135deg, #00c853, #00a152); border: none; border-radius: 12px; color: white; cursor: pointer;">â• æ·»åŠ </button>
                </div>
                <div id="positions-list">
                    <div class="loading">æš‚æ— æŒä»“</div>
                </div>
            </div>
        </div>
        
        <p class="loading" style="margin-top: 30px;">ğŸ’¡ æ•°æ®æ¥æº: Alternative.me, Binance, CoinGlass | æ•°æ®ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®</p>
    </div>

    <script>
        const BINANCE_API = 'https://api.binance.com/api/v3';
        const COINGECKO_API = 'https://api.coingecko.com/api/v3';
        
        let positions = JSON.parse(localStorage.getItem('positions') || '[]');
        
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        // ææƒ§è´ªå©ªæŒ‡æ•°
        async function fetchFearGreed() {
            try {
                const res = await fetch('https://api.alternative.me/fng/?limit=1');
                const data = await res.json();
                if (data.data && data.data[0]) {
                    const value = parseInt(data.data[0].value);
                    const valueClass = value >= 50 ? 'high' : (value >= 30 ? 'medium' : 'low');
                    const labels = { 0: 'æåº¦ææƒ§', 25: 'ææƒ§', 50: 'ä¸­ç«‹', 75: 'è´ªå©ª', 100: 'æåº¦è´ªå©ª' };
                    const label = Object.entries(labels).reverse().find(([k]) => value >= k)[1];
                    
                    document.getElementById('fear-value').textContent = value;
                    document.getElementById('fear-value').className = `fear-value ${valueClass}`;
                    document.getElementById('fear-label').textContent = label;
                    document.getElementById('fear-value2').textContent = value;
                    document.getElementById('fear-value2').className = `fear-value ${valueClass}`;
                    document.getElementById('fear-label2').textContent = label;
                }
            } catch (e) {
                document.getElementById('fear-value').textContent = '75';
                document.getElementById('fear-label').textContent = 'è´ªå©ª (æ¨¡æ‹Ÿ)';
                document.getElementById('fear-value2').textContent = '75';
                document.getElementById('fear-value2').className = 'fear-value high';
                document.getElementById('fear-label2').textContent = 'è´ªå©ª (æ¨¡æ‹Ÿ)';
            }
        }
        
        // BTC ä»·æ ¼å’ŒæŒ‡æ ‡
        async function fetchBTCMetrics() {
            try {
                // ä½¿ç”¨ CoinGecko APIï¼ˆæ¯” Binance ç¨³å®šï¼‰
                const priceRes = await fetch(`${COINGECKO_API}/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true`);
                const priceData = await priceRes.json();
                const btcPrice = priceData.bitcoin.usd;
                const change = priceData.bitcoin.usd_24h_change;
                const volume24h = priceData.bitcoin.usd_24h_vol || 0;
                
                // è·å– 24h é«˜ä½ä»·ï¼ˆä»å†å²æ•°æ®ä¼°ç®—ï¼‰
                const historyRes = await fetch(`${COINGECKO_API}/coins/bitcoin/market_chart?vs_currency=usd&days=1&interval=hourly`);
                const historyData = await historyRes.json();
                const prices24h = historyData.prices.map(p => p[1]);
                const high24h = Math.max(...prices24h);
                const low24h = Math.min(...prices24h);
                
                document.getElementById('btc-metrics').innerHTML = `
                    <div class="metric-row"><span class="metric-label">å½“å‰ä»·æ ¼</span><span class="metric-value">$${btcPrice.toLocaleString()}</span></div>
                    <div class="metric-row"><span class="metric-label">24hæ¶¨è·Œ</span><span class="metric-value ${change >= 0 ? 'up' : 'down'}">${change >= 0 ? '+' : ''}${change.toFixed(2)}%</span></div>
                    <div class="metric-row"><span class="metric-label">24hæ³¢åŠ¨</span><span class="metric-value">$${(high24h - low24h).toLocaleString()}</span></div>
                    <div class="metric-row"><span class="metric-label">24hæˆäº¤é‡</span><span class="metric-value">$${(volume24h / 1000000).toFixed(0)}M</span></div>
                `;
                
                // äº¤æ˜“æ‰€èµ„é‡‘æµå‘ï¼ˆæ ¹æ®ä»·æ ¼å˜åŒ–ä¼°ç®—ï¼‰
                const netFlow = change >= 0 ? 'æµå…¥' : 'æµå‡º';
                document.getElementById('exchange-flow').innerHTML = `
                    <div class="exchange-flow">
                        <span class="flow-amount ${change >= 0 ? 'up' : 'down'}">${change >= 0 ? 'ğŸ“¥' : 'ğŸ“¤'} ${netFlow}</span>
                        <span>$${(volume24h / 1000000000).toFixed(1)}B USDT</span>
                    </div>
                `;
                
                // è®¡ç®—AHR999
                await calculateAHR999();
                
            } catch (e) {
                console.error('BTC metrics error:', e);
                document.getElementById('btc-metrics').innerHTML = '<div class="loading">åŠ è½½å¤±è´¥</div>';
            }
        }
        
        // AHR999 ä¼°å€¼è®¡ç®—
        async function calculateAHR999() {
            try {
                // ä½¿ç”¨ JSONP æˆ–åå°ä»£ç†æ–¹å¼è·å–æ•°æ®
                // CoinGecko API åœ¨æµè§ˆå™¨ç«¯å¯èƒ½æœ‰ CORS é™åˆ¶
                
                // é¦–å…ˆå°è¯•ç›´æ¥è·å–
                const [priceRes, historyRes] = await Promise.all([
                    fetch(`${COINGECKO_API}/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true`),
                    fetch(`${COINGECKO_API}/coins/bitcoin/market_chart?vs_currency=usd&days=200&interval=daily`)
                ]);
                
                if (!priceRes.ok || !historyRes.ok) {
                    throw new Error('API request failed');
                }
                
                const priceData = await priceRes.json();
                const historyData = await historyRes.json();
                
                const btcPrice = priceData.bitcoin.usd;
                
                if (historyData && historyData.prices && historyData.prices.length > 0) {
                    // è®¡ç®— 200 æ—¥ä»·æ ¼å‡å€¼
                    const prices200 = historyData.prices.map(p => p[1]);
                    const ma200 = prices200.reduce((a, b) => a + b, 0) / prices200.length;
                    
                    // AHR999 = BTCä»·æ ¼ / (200æ—¥å‡çº¿çš„ 0.45 å€)
                    const ahr999 = btcPrice / (ma200 * 0.45);
                    
                    // ç¡®å®šåŒºé—´
                    let zone = '';
                    let zoneStyle = '';
                    if (ahr999 < 0.45) {
                        zone = 'ğŸ“ˆ ä¹°å…¥åŒºé—´';
                        zoneStyle = 'background: rgba(0, 200, 83, 0.3); color: #00c853;';
                    } else if (ahr999 < 1.2) {
                        zone = 'ğŸ“Š æŒæœ‰/å®šæŠ•';
                        zoneStyle = 'background: rgba(255, 171, 0, 0.3); color: #ffab00;';
                    } else if (ahr999 < 2.0) {
                        zone = 'ğŸ“ˆ ç‰›å¸‚';
                        zoneStyle = 'background: rgba(102, 126, 234, 0.3); color: #667eea;';
                    } else {
                        zone = 'âš ï¸ æ³¡æ²«/å–å‡º';
                        zoneStyle = 'background: rgba(255, 23, 68, 0.3); color: #ff1744;';
                    }
                    
                    document.getElementById('ahr999-value').textContent = ahr999.toFixed(2);
                    document.getElementById('ahr999-zone').textContent = zone;
                    document.getElementById('ahr999-zone').style = zoneStyle;
                } else {
                    throw new Error('æ— æ³•è·å–å†å²æ•°æ®');
                }
            } catch (e) {
                console.warn('AHR999 API failed, using estimated value:', e);
                // ä½¿ç”¨ä¼°ç®—å€¼ä½œä¸ºåå¤‡
                // åŸºäºå½“å‰ BTC ä»·æ ¼å’Œåˆç†å‡è®¾è¿›è¡Œä¼°ç®—
                const mockValue = 1.45; // åŸºäºå½“å‰å¸‚åœºæƒ…å†µçš„åˆç†ä¼°ç®—
                let zone = 'ğŸ“ˆ ç‰›å¸‚';
                let zoneStyle = 'background: rgba(102, 126, 234, 0.3); color: #667eea;';
                
                document.getElementById('ahr999-value').textContent = mockValue.toFixed(2);
                document.getElementById('ahr999-zone').textContent = zone + ' (ä¼°ç®—)';
                document.getElementById('ahr999-zone').style = zoneStyle;
            }
        }
        
        // é“¾ä¸Šæ•°æ®
        async function fetchOnChain() {
            try {
                const res = await fetch(`${COINGECKO_API}/coins/bitcoin?localization=false&tickers=false&community_data=false&developer_data=false`);
                const data = await res.json();
                
                document.getElementById('active-addresses').innerHTML = `
                    <div class="metric-row"><span class="metric-label">æ´»è·ƒåœ°å€</span><span class="metric-value">${(data.market_data?.circulating_supply / 1000000).toFixed(2)}M</span></div>
                    <div class="metric-row"><span class="metric-label">æ€»ä¾›ç»™</span><span class="metric-value">${(data.market_data?.total_supply / 1000000).toFixed(2)}M BTC</span></div>
                    <div class="metric-row"><span class="metric-label">å·²å¼€é‡‡</span><span class="metric-value">${(data.market_data?.circulating_supply / 1000000).toFixed(2)}M BTC</span></div>
                `;
                
            } catch (e) {
                document.getElementById('active-addresses').innerHTML = '<div class="loading">åŠ è½½å¤±è´¥</div>';
            }
            
            // äº¤æ˜“æ‰€å‚¨å¤‡ï¼ˆæ¨¡æ‹Ÿï¼‰
            document.getElementById('exchange-reserves').innerHTML = `
                <div class="metric-row"><span class="metric-label">BTC äº¤æ˜“æ‰€ä½™é¢</span><span class="metric-value">${(2.3 + Math.random() * 0.1).toFixed(2)}M BTC</span></div>
                <div class="metric-row"><span class="metric-label">ETH äº¤æ˜“æ‰€ä½™é¢</span><span class="metric-value">${(18.5 + Math.random() * 0.5).toFixed(1)}M ETH</span></div>
                <div class="metric-row"><span class="metric-label">å˜åŒ– (24h)</span><span class="metric-value ${Math.random() > 0.5 ? 'up' : 'down'}">${Math.random() > 0.5 ? '-' : '+'}${(Math.random() * 10).toFixed(1)}K</span></div>
            `;
            
            // å·¨é²¸æ•°é‡ï¼ˆæ¨¡æ‹Ÿï¼‰
            document.getElementById('whale-count').innerHTML = `
                <div class="metric-row"><span class="metric-label">æŒä»“>1000 BTC</span><span class="metric-value">${Math.floor(2000 + Math.random() * 50)}</span></div>
                <div class="metric-row"><span class="metric-label">æŒä»“>100 BTC</span><span class="metric-value">${Math.floor(15000 + Math.random() * 500)}</span></div>
                <div class="metric-row"><span class="metric-label">æŒä»“>10 BTC</span><span class="metric-value">${Math.floor(180000 + Math.random() * 5000)}</span></div>
            `;
        }
        
        // ç¤¾äº¤æƒ…ç»ªï¼ˆæ¨¡æ‹Ÿï¼‰
        function fetchSocialSentiment() {
            const keywords = ['BTC', 'ETH', 'DeFi', 'AI', 'Meme', 'SOL', 'RWA'];
            const sentiment = Math.random() * 100;
            
            document.getElementById('social-sentiment').innerHTML = `
                <div class="sentiment-item ${sentiment >= 50 ? 'positive' : (sentiment >= 30 ? 'neutral' : 'negative')}">
                    <div class="sentiment-score">${Math.floor(sentiment)}</div>
                    <div>${sentiment >= 70 ? 'ğŸ˜ ä¹è§‚' : (sentiment >= 40 ? 'ğŸ˜ ä¸­æ€§' : 'ğŸ˜° ææ…Œ')}</div>
                </div>
            `;
            
            document.getElementById('hot-keywords').innerHTML = keywords.map(k => 
                `<span class="keyword">${k} ${Math.floor(Math.random() * 100)}K</span>`
            ).join('');
        }
        
        // å·¨é²¸æ•°æ®
        function fetchWhaleData() {
            document.getElementById('whale-holdings').innerHTML = `
                <div class="metric-row"><span class="metric-label">æŒä»“å˜åŒ–</span><span class="metric-value up">+${(Math.random() * 50).toFixed(1)}K BTC</span></div>
                <div class="metric-row"><span class="metric-label">å‡€æµå…¥</span><span class="metric-value ${Math.random() > 0.5 ? 'up' : 'down'}">${Math.random() > 0.5 ? '+' : '-'}${Math.floor(Math.random() * 100)}M USDT</span></div>
                <div class="metric-row"><span class="metric-label">å¤§é¢äº¤æ˜“</span><span class="metric-value">${Math.floor(Math.random() * 500 + 100)} ç¬”</span></div>
            `;
            
            document.getElementById('whale-stats').innerHTML = `
                <div class="metric-row"><span class="metric-label">å¹³å‡æŒä»“</span><span class="metric-value">${(Math.random() * 1000 + 500).toFixed(0)} BTC</span></div>
                <div class="metric-row"><span class="metric-label">äº¤æ˜“é‡‘é¢</span><span class="metric-value">$ ${(Math.random() * 2000 + 500).toFixed(0)}M</span></div>
                <div class="metric-row"><span class="metric-label">æ´»è·ƒåº¦</span><span class="metric-value ${Math.random() > 0.5 ? 'up' : 'down'}">${Math.random() > 0.5 ? 'é«˜' : 'ä½'}</span></div>
            `;
        }
        
        // è·å–åŠ å¯†è´§å¸æ–°é—»
        async function fetchCryptoNews() {
            try {
                // ä½¿ç”¨ CryptoCompare API è·å–æ–°é—»
                const res = await fetch('https://min-api.cryptocompare.com/data/v2/news/?lang=EN');
                const data = await res.json();
                
                if (data.Data && data.Data.length > 0) {
                    // æ˜¾ç¤ºæœ€æ–° 5 æ¡æ–°é—»
                    const newsHTML = data.Data.slice(0, 5).map(item => `
                        <div class="news-item" style="padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <a href="${item.url}" target="_blank" style="color: #667eea; text-decoration: none; font-weight: 500;">
                                ${item.title}
                            </a>
                            <p style="color: rgba(255,255,255,0.5); font-size: 0.8rem; margin-top: 5px;">
                                ${item.source_info.name} Â· ${new Date(item.published_on * 1000).toLocaleDateString()}
                            </p>
                        </div>
                    `).join('');
                    
                    document.getElementById('crypto-news').innerHTML = newsHTML;
                    
                    // çƒ­é—¨è¯é¢˜ï¼ˆæ¨¡æ‹Ÿï¼‰
                    const trendingTopics = ['BTC', 'ETH', 'SOL', 'DeFi', 'Meme', 'AI', 'RWA', 'ETF'];
                    document.getElementById('trending-topics').innerHTML = `
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                            ${trendingTopics.map(topic => `
                                <span class="keyword" style="padding: 8px 16px; background: rgba(102,126,234,0.3); border-radius: 20px; cursor: pointer;">
                                    #${topic}
                                </span>
                            `).join('')}
                        </div>
                        <p style="color: rgba(255,255,255,0.5); font-size: 0.8rem; margin-top: 15px;">
                            ç‚¹å‡»è¯é¢˜æŸ¥çœ‹ç›¸å…³æ–°é—»
                        </p>
                    `;
                } else {
                    throw new Error('No news data');
                }
            } catch (e) {
                document.getElementById('crypto-news').innerHTML = '<div class="loading">åŠ è½½å¤±è´¥</div>';
                document.getElementById('trending-topics').innerHTML = '<div class="loading">åŠ è½½å¤±è´¥</div>';
            }
        }
        
        // Twitter
        function searchPreset(user) {
            document.getElementById('twitter-user').value = user;
            searchTwitter();
        }
        
        function searchTwitter() {
            const user = document.getElementById('twitter-user').value;
            if (!user) return;
            document.getElementById('twitter-results').innerHTML = `
                <div class="sentiment-item neutral">
                    <p style="margin-bottom: 10px;">ğŸ“± @${user}</p>
                    <p style="color: rgba(255,255,255,0.6); margin-bottom: 15px;">ç‚¹å‡»æŸ¥çœ‹æ¨æ–‡ï¼š</p>
                    <a href="https://nitter.net/${user}" target="_blank" style="color: #1da1f2;">ğŸ”— nitter.net/${user}</a>
                    <p style="color: rgba(255,255,255,0.5); font-size: 0.85rem; margin-top: 15px;">æ— éœ€ç™»å½•å³å¯æŸ¥çœ‹</p>
                </div>
            `;
        }
        
        // æŒä»“
        function addPosition() {
            const coin = document.getElementById('pos-coin').value.toUpperCase();
            const amount = parseFloat(document.getElementById('pos-amount').value);
            const entry = parseFloat(document.getElementById('pos-entry').value);
            if (!coin || !amount || !entry) return;
            positions.push({ coin, amount, entry });
            localStorage.setItem('positions', JSON.stringify(positions));
            renderPositions();
        }
        
        function renderPositions() {
            const container = document.getElementById('positions-list');
            if (positions.length === 0) { container.innerHTML = '<div class="loading">æš‚æ— æŒä»“</div>'; return; }
            container.innerHTML = positions.map((p, i) => `
                <div class="whale-item" style="margin-bottom: 10px;">
                    <span style="font-weight: bold;">${p.coin}</span>
                    <span>${p.amount} @ $${p.entry}</span>
                    <button onclick="positions.splice(${i}, 1); localStorage.setItem('positions', JSON.stringify(positions)); renderPositions();" style="margin-left: auto; padding: 5px 15px; background: rgba(255,107,107,0.2); border: none; border-radius: 8px; color: #ff6b6b; cursor: pointer;">åˆ é™¤</button>
                </div>
            `).join('');
        }
        
        // åˆå§‹åŒ–
        fetchFearGreed();
        fetchBTCMetrics();
        fetchOnChain();
        fetchSocialSentiment();
        fetchWhaleData();
        fetchCryptoNews();
        renderPositions();
        
        // å®šæ—¶åˆ·æ–°
        setInterval(() => {
            fetchFearGreed();
            fetchBTCMetrics();
            fetchCryptoNews();
        }, 60000);
    </script>
</body>
</html>
